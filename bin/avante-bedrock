#!/bin/bash

# Get AWS credentials for use with Bedrock and Avante.

set -euo pipefail

profile="${1:-default}"
credentials="$(aws configure export-credentials --profile "$profile")"
access_key=$(jq -r '.AccessKeyId' <<<"$credentials")
secret_key=$(jq -r '.SecretAccessKey' <<<"$credentials")
session_token=$(jq -r '.SessionToken' <<<"$credentials")
region=$(aws configure get region --profile "$profile")
export BEDROCK_KEYS="$access_key,$secret_key,$region,$session_token"
